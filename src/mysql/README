
データ取得ツール

ORANGE POSのSTG(PRD)環境のDBを、ローカルに取り込む際に、データを絞って取得するためのツール

手順
1, 対象DBのテーブル構造のみのダンプを取得する。
$ mysqldump -u youser_name -p target_database --no-data > db.dump

sample
# mysqldump -u root -p orange_pos --no-data > ishiguro_orange_pos_structure.dump
$ mysqldump -u admin -h stg-ishiguro-db01.crx3rtja2ldw.ap-northeast-1.rds.amazonaws.com -p --skip-lock-tables --no-tablespaces orange_pos --no-data | gzip > ishigro_stg_orange_pos_struct_20241202.dump.gz

1-2, 取得したファイルをsrc\mysql\file\table_structure.dumpに保存。「

2, すべてのテーブルの件数を概算で取得
mysql> SELECT TABLE_NAME AS table_name, TABLE_ROWS AS row_count FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'orange_pos';

sample
mysql> SELECT TABLE_NAME AS table_name, TABLE_ROWS AS row_count FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'orange_pos';
+--------------------------------------------------+-----------+
| table_name                                       | row_count |
+--------------------------------------------------+-----------+
| SequelizeMeta                                    |       465 |
| admin_log                                        |      5199 |
| admin_log_item                                   |     72404 |
,,,,
| warehouse_translation                            |       123 |
| yoy_daily_sales_summary                          |    341274 |
| yoy_date                                         |       790 |
| yoy_monthly_sales_summary                        |     11803 |
+--------------------------------------------------+-----------+
234 rows in set (0.40 sec)

2.2 取得したファイルを、カンマ(,)区切りに成型しsrc\mysql\file\tables_cnt.txtに保存。

3, 以下のコマンドを実行して、テーブル構造をjson化して保存
$ python3 gen_table_structure.py
保存先は、src\mysql\file\tables.jsonとsrc\mysql\file\tables.txt になります。

4, 以下のコマンドで、出力させるデータを対話型処理で逐次実行

// 作業ファイルを初期化する。
$ echo '' > src\mysql\file\work.txt

// 以下のコマンドを逐次実行
$ python3 serch_table_relation.py <table_name>

処理の流れ
　引数に何も指定しない場合、全テーブルを実行する。ex: python3 serch_table_relation.py
　引数にテーブル名を指定する場合、指定したテーブルのみを実行する。ex: python3 serch_table_relation.py product // productテーブルを処理する場合

実施結果がEmptyの場合
mysql> select pos_transaction_item_id from pos_transaction_item order by updated_at desc limit 200;
+----------------------------+
| pos_transaction_item_id |
+----------------------------+
| EMPTY |　　　　　　　　　　　　　　←　ここに EMPTYと入れる。
+----------------------------+
1 rows in set (x.xx sec)


完了すると以下にselect where 文が記述される。
書き込み完了:path C:/Users/masanori.nijo/Documents/chatGpt/src/mysql/file/dump_where.txt

ダンプファイル作成サンプル

mysqldump -u admin -h stg-ishiguro-db01.crx3rtja2ldw.ap-northeast-1.rds.amazonaws.com -p --skip-lock-tables --no-tablespaces --no-create-info --set-gtid-purged=OFF --single-transaction --tables orange_pos stock_transaction_item --where="stock_transaction_item_id IN ('01JCN1YQJQ6R1D3SE3RY9F87MR', '01JDH1CTQCAV4R198VYB5KHDTP', '01JCFV29X9MDZ2PS981YMEC1XB', '01J9B1X3TJYF7T11EAR6MQGDXR', '01JD65VV83VDVWXQKEV9VGDAJG', '01JCFV29ZYNK1662P1W9SF15BE', '01JD6WVQ7Q2TAW46JVR5CNS14C', '01JD65DGYZDQMG1SYFMWKF738G', '01JCMC85XM5S56CTP45EMJH27N', '01JCF87ZQ4ZT51DD34M0A6SCJA', '01JD655RWZS43QW1EVC96DQCGR', '01JCFVRFPMAK294D7M1314PX3P', '01JCF87ZMWVZ4E5ZF6RJCHTVG3') " | gzip > ishigro_stg_orange_pos_stock_transaction_item_partial.$(date +%Y%m%d).dump.gz
ps: :X<tlZ~*3ajI$7!e2jO_[]zAN#fG

$ tar -cvzf tmp_20241205.tar.gz tmp_20241205/

$ tar -xvzf archive.tar.gz


mysqldump -u admin -h stg-ishiguro-db01.crx3rtja2ldw.ap-northeast-1.rds.amazonaws.com -p --skip-lock-tables --no-tablespaces --no-create-info --set-gtid-purged=OFF --single-transaction --tables orange_pos buy_order --where="buy_order_id IN ('01HYD5QRYX94W46DHG6S7NMPJ1', '01HREN8777RA1YTWBE19FB2V8A', '01JDH0VQ80YYC64NYA48EFA481', '01JCN1TMKY1ZY36E8GYQ28JJYH', '01JD693ETHYYN02KD166740FNZ', '01HV5PDQ5FH0SGNNNWW4RN9M3P', '01HXGYP1GYEYVKH2689FG79DRR', '01JCFV614WRS11BGE3Y2911W6K', '01J9AZH49MGG3GYGAEKGGXKCH3', '01J9AZ5WN8WCYN8CKA21TWTJ5B', '01HPQXJMNV60Q2XKWB8499T32Q', '01J9AZRPJJMATHCKDV32R20C0D', '01J1EF9HHN41Q9Z0EBFA445FC9', '01J9B0J1M4Q6PE2WMD59K1AGJ0', '01HXBHW0C4JR2CGXVDRG82FX05', '01JCMBYZRAZQEZ0WKD2RVTJF2M', '01J9AZZT0EVAN3A8FC0VYGQ279', '01JCF67S9JQYV86R6E396722PR', '01HREMTAWJ1MSFTBQDVC0GSZSN', '01JCF7JT9XPAHBEFFY4ZTYQ2W7') " | gzip > ishigro_stg_orange_pos_buy_order_partial.$(date +%Y%m%d).dump.gz
mysqldump -u admin -h stg-ishiguro-db01.crx3rtja2ldw.ap-northeast-1.rds.amazonaws.com -p --skip-lock-tables --no-tablespaces --no-create-info --set-gtid-purged=OFF --single-transaction --tables orange_pos buy_product --where="buy_product_id IN ('01HYD6EERG6HB5AKAQ9N5MCNAK', '01HYD6EES69H3MRJAK6RV4GJAH', '01JCF7K3Z943KK5472203KVQ0Q', '01JCF7K3Z0MGDCS41G07C6SA84', '01HREN9VW1VHJ9EG32V2H4WD3S', '01HXGYPK310CEKCFM3W1FRVVS7', '01J9B0J5TZ67AEWR9BK1K3SAC0', '01JDH0VQ8PSNZ14M1M71ME62JP', '01J9AZRYK9SBN7GDEMA4CW5S6R', '01HREN9VWPDTCWQF5KBFFV6ARH', '01JCN1TMMG768V873B3E37Y4GB', '01J9AZ6FE4MMRCS11VGAX63P72', '01HV5PDXQYN3ZZFD2JP1R8AW4V', '01HYD6EESP6X94TGJJB1834NSJ', '01HYD6EETN65136HSS71CMWEAB', '01HXGYPK272338XT7756N24RNB', '01J9AZJAG6PYY9PCRCBWC4VX3E', '01HPQXJMNV707DX4YE2VZ79DMG', '01HYD6EEVM6D44RJAKAMVMGJJH', '01JD6940N27N7EVNSEXK1C4RB3', '01J9AZJAFY1P4TXXRE663B9FKP', '01JDH0VQ9DPS1NKXXY30SX1KSJ', '01J9AZZXB7NTAN17CC523VBZA9', '01J1EF9KR1PTHY94G6E245XF8P', '01HREMTVY2PFSPJ5Y35WDPDJXY', '01HYD6EER0B58MJN9K9X7M8H9G', '01HYD6EEV4ACT50CTJARV38PJF', '01JCMBYZS6G19CQXSW2J226SCQ', '01HV5PDXQ5W5YZ5QSE9HHZVTDF', '01JDH0XQ476X61VVNXWWH44H2S', '01JCFV6GQGZAF2GRKK21KDKJGS', '01JCFTNQ7SWPYVAE03KZD2XZZR', '01HYD6EEWA6WSMPP2D69CN0HT7', '01J9AZ6FEV2WV69SEBBSGVGXWW', '01HXBHZD6T6C90MKS1QCFXRF3T', '01JCN1TMN37RAJ94M49V2YP1K9', '01HYD6EET590T54D9R6D43AKJ1', '01HXBHZD6831GDFME0NVDZMCZN', '01JCF68SV0KEAFRTHM965KNTZM') " | gzip > ishigro_stg_orange_pos_buy_product_partial.$(date +%Y%m%d).dump.gz
mysqldump -u admin -h stg-ishiguro-db01.crx3rtja2ldw.ap-northeast-1.rds.amazonaws.com -p --skip-lock-tables --no-tablespaces --no-create-info --set-gtid-purged=OFF --single-transaction --tables orange_pos buy_product_external_sync --where="buy_product_external_sync_id IN ('01JCN1TMMWB2XAD6Z3NGNCKJSK', '01JCFTNQ7JSZ8TFHKPR1TP83BW', '01JCFTYWYMP736NM4EX0M69FDA', '01JCF7K3Z9A2WVG5AAMBZH428A', '01HYD6DKW16SC4EKTF9S94CD2B', '01JCFTNQ7SGFQAWVZZB3W6VWZ4', '01JDH0XQ474CB29Q8GQ9B2T0K7', '01J9AZJAFYVRV4WXDRM8W9R11Z', '01HYD6DKX760WNADAA9CV4ED24', '01J9B0J5TZKTRC8S73FP69MPDF', '01JDH11XTQKBJVK1R1ZJ40CQZQ', '01JCFVP0GAMJQDS6GXX5GKQYGT', '01JDH0WWQ7FX95BNXRENXK7FSZ', '01J1EF9KR18XW7PH5QWAME96HK', '01JCMC1YHA6HV0YM770PEQH8WG', '01JDH0XQ3E55923GCB2TT4ZFVT', '01JDH0WWPTCSD380EP8J6P64PV', '01JDH11XTXF2FEN3MQ65MTP04R', '01HV5PDXQ5X940HT435R2S0KF5', '01HYD6DKWH9H74EC9QAN34GPA6', '01HV5PDXQY6151JC86Z3BKTJQ2', '01JDH0VQ95K2GP8HNRS3SGFX8X', '01HYD6DKY7A8T46NTJ84RKCHJD', '01HREN9VWP799T2K4YSDX4DFG2', '01JCN1VG845FRN29RANFWQBNPB', '01HREMTVY2KESA0T64P11Q3KC8', '01JCMBYZSKMPZFQS5HPDXEVKSN', '01HXGYPK32B0THDMXTERE9GP7A', '01HYD6DKXQ61256MSHAXCK6GA7', '01J9AZ6FE4R85KGPQDV4PYXF5V', '01HYD6DKYP88RNGP2Q617N8PJK', '01JCN1TMN9DXAKSSDCKN7N1GEW', '01J9AZ6FEVCFYFCZSTJFNRZVGW', '01J9AZRYK9VDSDSY61819CR7EC', '01JDH0VQ9HZTRR8C4RNKRHZFM9', '01JCN1VG7JRT6644C2TVT8H7S0', '01HYD6DM0CAS2NGHHN8H15AHTG', '01JCF68SV031HQGBZD3C7V3EC0', '01J9AZZXB79YSN1HJ7Y9FGTVDB', '01HYD6DKZ5A0S5ANTGA9D52DTT', '01HXBHZD680H9ZDFGVJ8V70XPA', '01JCF7K3Z07P8JY5PQ060CHB5Q', '01HXGYPK27T38VSJZ4FQAQKR6J', '01HREN9VW11FJ8H9W7P6CPCSAK', '01JCFV708KCCY90KYQ54KX79VW', '01JCFTYWYZRWB1KGWVQK6CZMEA', '01JCN1VKG7718EW63VCT7GDRPN', '01JCN1VKFSP4QRP0SXA23EAJ6Q', '01JCFTV2C3VJ9WGS9HJ5923TFJ', '01JCMC220HV0B9KXEV30TAXK13', '01JD6940N2S5S9QHTDERGMFMKF', '01J9AZJAG7G1391G35SQH59Y1A', '01JCFTV2BXMCW9P3V02T4WCE76', '01HYD6DKZNA0R3JNAN9D5KCJ1M', '01HXBHZD6T3Z1R86SY0DHYGND7', '01JDH11XV45Z0R4QT3ZM2GAYGY', '01JCFV6GQGC17C2A4BTRXWE8SA', '01JDH0XQ3TRJB2FX51GSP98NS2') " | gzip > ishigro_stg_orange_pos_buy_product_external_sync_partial.$(date +%Y%m%d).dump.gz
mysqldump -u admin -h stg-ishiguro-db01.crx3rtja2ldw.ap-northeast-1.rds.amazonaws.com -p --skip-lock-tables --no-tablespaces --no-create-info --set-gtid-purged=OFF --single-transaction --tables orange_pos pos_transaction_item --where="pos_transaction_item_id IN ('01JD65DGVAGQCR1PJY0BNSTYJ7', 'EMPTY', '01JD655RRWZFWAZSAS0YBHN2EV', '01JD65VV5RPXEYES6T1FCBMD3R') " | gzip > ishigro_stg_orange_pos_pos_transaction_item_partial.$(date +%Y%m%d).dump.gz
mysqldump -u admin -h stg-ishiguro-db01.crx3rtja2ldw.ap-northeast-1.rds.amazonaws.com -p --skip-lock-tables --no-tablespaces --no-create-info --set-gtid-purged=OFF --single-transaction --tables orange_pos product --where="product_id IN ('E694DF49761FB7C2CD51AADB3A', 'A4B29FF4E278DB5E451F58EBC9', 'A88A3938949A765351A41F2EC1', '96560236C866AF8CA05A3A4BF9', '7A0171C8346D6F7B99FEC9874B', 'A8CF8A8384758B9030A69134FF', 'CF33F0CA09D546B7834CFFF132', '6BF3551AF3C33CB38DEE9677B2', '8057DD9F7A71BC0AD3ADE3AA97', '8746E49AD056611071F9BC424C', '5CD21622C567ACD68921750FEE', 'DC684FE17A941A71CC20D2445D', '84D922826D958A073C69D8B19F', 'D43ADE26DADFCD12F92A96FDC9', '7EA3A5E63F89A224176EFA3C21', '547BFF898EEEB20D512675268B', '6544C895A83F9B8F33C57946EF', 'F8ACCCF70BA4591BF4CF366D78', '96218AAC790187F18E883AE70D', '2F35BA113ACFF809AEC33A151B', 'CB0F8D7CCE03195C99E58CE328', '9F85A5D463C94D8D535AF90C73', 'C97D6AC2CE93DFCFB4EA02AAA3', '3E6B97F87A90A286C7265E9548', '617537DA4AC069ABF68D9D509C', '261BD18DED710D551E6FDBA8B8', '04E0493030589E0CC373315A0F', 'A927DF5A352500225B8805BA59', 'AA80FE7C20D7E2F087CE92CB47', '8E8E2AC60D18D34E33ECE4DFA1', 'E9F5E847DE66096EFDD3E9A97D') " | gzip > ishigro_stg_orange_pos_product_partial.$(date +%Y%m%d).dump.gz
mysqldump -u admin -h stg-ishiguro-db01.crx3rtja2ldw.ap-northeast-1.rds.amazonaws.com -p --skip-lock-tables --no-tablespaces --no-create-info --set-gtid-purged=OFF --single-transaction --tables orange_pos product_price --where="product_price_id IN ('A5EF4C852F2C5282842D2AB6F1', 'C58D9F68F899D68AE448E42B89', 'DFA31887D625C7425940722735', 'E694DF49761FB7C2CD51AADB3A', '484AD223880A16789043DE2E92', 'A4B29FF4E278DB5E451F58EBC9', 'A88A3938949A765351A41F2EC1', 'A269EBA00FF49B767AA94BE944', '96560236C866AF8CA05A3A4BF9', '840801241D93053BC84FFAA079', '7A0171C8346D6F7B99FEC9874B', '3772D7B00228F2A03297D66BDB', '3319D7D420E93E7A2AA8AD5A85', 'A8CF8A8384758B9030A69134FF', 'CF33F0CA09D546B7834CFFF132', '8462C289DAB0D9EAAB10A82988', '6BF3551AF3C33CB38DEE9677B2', 'D6FBADFBB73CF6A20C59987D6F', '8057DD9F7A71BC0AD3ADE3AA97', '40E57E0B58C45649F651DCFE68', '3E9EBC7C35E952F26E92A03880', '150D6B6B53AF34A6CBE8BBC11C', '8746E49AD056611071F9BC424C', '3D18467F8FF1633385B3FA32C7', '538D74E9BFEF7844693A66C4B4', '5485DC951F36306586DA4FAD05', '5CD21622C567ACD68921750FEE', 'DC684FE17A941A71CC20D2445D', '8047E956E08A3F71440E2CC16E', 'C5B0892796C8CADAF78C88540C', '84D922826D958A073C69D8B19F', '503A0A503A9B29867C3177C45F', '599409F2C2800AC68B36313215', 'A8D2642FB7D97ED9A6939F25B6', 'D43ADE26DADFCD12F92A96FDC9', '7EA3A5E63F89A224176EFA3C21', 'E4405F5900285FE28B215E7365', 'D5006E799CDE4690D871420FF5', '474FC62A7385EA200A4104C5FB', '547BFF898EEEB20D512675268B', '6544C895A83F9B8F33C57946EF', 'F8ACCCF70BA4591BF4CF366D78', '96218AAC790187F18E883AE70D', '111DAC6D4016A3EB127E4B950C', '2F35BA113ACFF809AEC33A151B', 'C5142FC1B0292F0270271962D6', 'CB0F8D7CCE03195C99E58CE328', 'CC412E5A64EA8785A01228F138', '9F85A5D463C94D8D535AF90C73', 'C97D6AC2CE93DFCFB4EA02AAA3', 'A3B38EE2C70FE13200F9A5224A', '3E6B97F87A90A286C7265E9548', '617537DA4AC069ABF68D9D509C', '1889B34B6088E568ECA157532F', '261BD18DED710D551E6FDBA8B8', '04E0493030589E0CC373315A0F', '2301D336DBD76AF9BE15C01283', 'A927DF5A352500225B8805BA59', 'AA80FE7C20D7E2F087CE92CB47', '8E8E2AC60D18D34E33ECE4DFA1', '81E38A9B599FEFD564810D9BCD', 'E9F5E847DE66096EFDD3E9A97D') " | gzip > ishigro_stg_orange_pos_product_price_partial.$(date +%Y%m%d).dump.gz
mysqldump -u admin -h stg-ishiguro-db01.crx3rtja2ldw.ap-northeast-1.rds.amazonaws.com -p --skip-lock-tables --no-tablespaces --no-create-info --set-gtid-purged=OFF --single-transaction --tables orange_pos product_sku --where="product_sku_id IN ('22687962D7BC63B8D0F1133954', '79E27AE6D5A1845D129BE305B4', '0949EA32F758A98CA5CD395DA0', '0F82FF94E712CA112A07ECF8D6', 'F7CBCC6866CD72CB1983800CDE', 'DAFDCB08E869BB14C5A830FE2F', 'C0D6CE534EFB66392F7E2B9D06', 'EC033F298E4B71039B5015956E', '6C52ED77B00BE20E1FCA2F9253', '736EBE59C6D2644EAD505778B5', '4213891D5CD72F176C0B65B7A9', 'CE711CFFAFFC0294CB886C7721', '5BE0315168E46F61EC07BDBCAF', '726BD834758E0450A996C0B7A1', 'A7C8AED6DDBD75768C84E21FC9', '224B58CBF9C8F22E6E8FC35CC8', '1DC5E5D9D0251E21BDED3E9D4A', 'DF6E8DA5BF0B4719231CC3326C', 'B76C6BBB2F016417E1DCDC2209', '44D1F31BB108ECA0FD0A67A61A', '9C9087D5026BA84E9127BC5F69', 'DDA0BAE2FFA1307DBADD4090E9', '8BD37823093D04FCF7C14E5C6C', '94465348DBA9DACB505F735B1B', 'CFF72BDA04F525639894771C57', 'F9F1E088A160389416DF92415E', '90300E79E690406BC2719C20E3', '8DEF8028934D010C7D12BF007D', '45812C851667B64563A8947451', '5F18477DEB3E3AD1B1A52FCF15', 'FB926CF69CE43D76D6806565D1') " | gzip > ishigro_stg_orange_pos_product_sku_partial.$(date +%Y%m%d).dump.gz
mysqldump -u admin -h stg-ishiguro-db01.crx3rtja2ldw.ap-northeast-1.rds.amazonaws.com -p --skip-lock-tables --no-tablespaces --no-create-info --set-gtid-purged=OFF --single-transaction --tables orange_pos product_translation --where="product_translation_id IN ('39CDBE61910CE35F4A1B515B21', '3904A8FA609A219D1588E26CBA', 'DC3A368F8C4C33D98DB9D88EFA', '7743EB5698E51D8E8C7EDAC584', 'FE7D722BA293023B56EFFD4DE5', '1C40D93CAF6E8D6ED4BD010E2D', 'E8D6325AC63644864B0743D9DB', 'C9A322C4A11B10DCC4113EC6DD', 'D6EB5AC4B698D2DE50CA273A71', '5042183F8EE0B80DA7BA32A9CE', 'FA12CA804B0156C09A918CDC0A', 'E7B9D74D7920204921F1485D51', 'C4F5DC0268CABF1703533E3112', '27FB362831A0E4817AA5A696FE', 'C726E71D970EF49D9E2CE85E14', '685D8FE371D92C11497A5EE2E2', '31E12302648DDAB69D72ED69AD', 'A0AB069D514AECBE438F46F6CC', '473EBFD9598CFBF67CCBB80513', '9A5578151E1C30FA908BAFC884', 'E010C474CCC333AB7351DBEA5D', '62598CC92B60B88007B778DDE9', '2FB7EAB123D03E82B8FF831F7D', '757245B81951CE6295608A167C', 'FE40D15C1DB375625C944B79E0', 'DA2714DA6D49A2988374E31500', '094D39E9DD47A930ED467D1AB0', 'ADCAFFE34F516D6CA1D24874CE', 'BBC46261596B4DEBF516C9838D', '0F3775A1820520A3A11B32E124', '8192E930DDE57931B42AA38339') " | gzip > ishigro_stg_orange_pos_product_translation_partial.$(date +%Y%m%d).dump.gz
mysqldump -u admin -h stg-ishiguro-db01.crx3rtja2ldw.ap-northeast-1.rds.amazonaws.com -p --skip-lock-tables --no-tablespaces --no-create-info --set-gtid-purged=OFF --single-transaction --tables orange_pos stock_item --where="stock_item_id IN ('0AF8BC0749C26D0210E6FB943C', 'BF45C15E1BB68C25A727EDE515', '1D40555DC9A2C8AAAB91C92DEB', 'C73780EB24F2A463D4372B550A', '330ECB187BA7C7765BC758C4EC', 'E5A4595F3E9462394CD74D8ACD', '6C886458428CEB002200D19047', 'CCA518286311B391AD8388768B', '194D3323C3313B8C93AF0FD278', '0F0F99961F24E0C05332E1B540', '2467A3AE52B78DB3F58C83DCAB', 'DA3E566E24520FB878343087C2', 'DFE425603D11C6A3A19F3B9D70', 'A14FD77695E0004485040D4242', 'CF1D581229C595107FA804DF20', '12406854ECA34F2D8EBD9FDFFC', 'B0928099BA8C1899AC7CEB33EB', '94DC3A028E8AB1008446747FCA', '756BF6C3530E1754478717965F', 'AAB94D3E4DDAF292733C52DBA1', '944589F8663D4EABC2DBFB8444', '48FB699337EB3A46EAEB3045C9', '72E371D99310E1765182323B6C', '36269CE44E1132D4433AE82211', '2D3762B201F14B4C403A344FEE', '6F42BEDD127A3F7C588F1C3517', 'B9FB4A3EF85F27E661904FEE90', '5A5F078B558990305D31101470', 'D29ADAC160F095605874C3615A', '53300E7C9D809B0DEB5EBD46F4', 'E7AB5182E0B5AC29F1664AD7C2', 'B3C2E8D4B2ED6F225E7BA86946', '46DB117339EED91EA568920892', '2932F86CA28CF10D4AC96124B6', '77A5CAF2A61DF000C49C5D95A7', 'AF154D30D3238150FE818A666F', '3B285C6776E0BD5E706144BDDD', '92A885ED403896461F5E1369CA', 'C463255CB9C55B01C4309E14EC', '4DBFAE43F188DB139CE1F0174E', '360FE7506B66D1363C1D9CECD8', '23317BB8D4C488219507BFF303', '4699C99A12E84C7E0926EC7AF4', '91FE98B2E547958A36BF752C16', 'A10EC66804AE0A98036E6592AB', 'CD60CDEB65470676051E156176', '39DB7C7685843836B52B086C81', '13BA7CBAFEC27A575A13D9D8B1', '1EE2E994B7C6D0DD76F2D76836', 'F01CD5214E462537043F0A1980', 'F9681BB0B97E048F66B369CAA7', 'B64A5681222A0F1263886B0B6A', 'C7553940E8375A00AAF92712AB', '287B65D69E5EFA0E649D7C0678', 'B5C695A5B05A39D54A03916129', '9E69CDBE055DC15249427CB018', '4C9EA954F314FAEF34DCDCEF86', '8DCE9D70B1234ADA0138FF654F', '426064BDAF9A587CDA1B7B758D', '12F68E3FD479F1045F0F77333C', '894E554E3ACA99B541DCDACBB9', '9271CEA43F43ED90AF5E574410', '3FD4DA8203E5DBF6019A8DFF68', '85BAFFC15D3D299E24FCA18924', '6D4A4F79E5592684E6A75EA6B9', '9EA4C5361DAA5610B7AE8909C8', '50B8D282EF32A9C5BB986B4080', '1674C6E157B99217AA7C28398D', '20385EB5FB3D017837C9C93E27', '551F79F0550AB36F8ECEC7D879', '5FE464E55B2CD71A8F7200F4D3', '7944E8145C1E4B66B9D6694144', '989CA1B6E6DBCC4FAC2B7556A9', 'AE85AFBEFA934D2C46C234385B', 'E8BC3108A9FEEFA21EFC4B5C56', '3DEE0C8A7A58A018F84289BF96', 'EAD299252018A546F2008B8A49', '2E60F570243BFE99E1A9916E31', '04420363E8A60B9123D443F6FE', 'FFBF8AD38690841CCE35897360', '811D9C540FFED3C80A40AEDBAA', 'B3A2C6B6FAE059E7DAF4BC6B70', '590FEE2B0CB5ED0FA39CA98F9D', '77F095DA977B660F1944BF47D4', 'A9DF69EDAABB87B95193EA2D8A', '47845B7163287C834CD3F66DFA', '9309D8A688F61E178430C60EDA', 'DCE672D7B2F6DBF54180DE8B86', 'C9F34FC5950DBDCBE885689A27', 'AE03514E2912CAD45E059B415D', '8258E88140A955DA8424557DDB', 'F0B79C26EE5AE45F7F862B07D9', 'EC285D0ED3C135E8F061B6A526', 'EC46D9B16A39BCBAE2467257FF', '32CBBAE3B59017E0B1407822A8', 'C5BCF7F7BF87C9D93D3126F4E4', 'F1945104224717534939383179', '3AE4306836B8DA6460FD78EE52', 'CE394351856214C0FB823E8655', '89C46CDF863A9840B842F4E2E8', 'CEBA5319820598AFB66DB60A5C', '74AF9FBF0C3DF3CEDA0D3CB835', 'C7149EC95D0FD3460E8A257543', 'C4F0F96B1CD169A21F0BD5271A', '8ACB578E4CEDB710C28F4F7CB5', '4DF754CDEE93CA983078F2B994', '7C358EA88E8B255408F7B1B5DF', '990A806EAD7D56809A73844410', '3CDB5F68CC68AD9557B1B4FF7A', 'F8394AAAF508FE21DCC8BEFF05', '31436FD0F193FBEF79890E6575', '12C7917CBEB5625F260B4CAB45', '1B43ACAE6F9CCB61D27F30FE9C', '9E413EB17F44053181E8D17483', '61A453140C05F3C50E41B27787', '0CBE694591B28FAF155AF74E8A', '338C037271BF80C0E0540CBF2D', '7786D02C07B082E30E8F13157B', '7159973485999C56328BCC1598', '03031B7E3D2BCA0E07626D3629', 'B6F07258492AF6DCED048C14C6', 'FB2361FF91A7E7473AD3B22AE1', '7389EC9D003663045EB1455B88', '3160BAC2D950190A3AC52CC687', '1432E409E775AB54B4FC3E5AD7', '9F5813B30E0D2983F308F64FD3', '655176BDE6166C0FB5C9910A11', '32494E9D547E54DD9DF5645221', '285D2EB90C06D35C1495E4A607', '25B615AF31DCDCF20B2BB12813', '4A856723CF4C092C96859C0FD5', '925AA193894E79868BE8FFBE39') " | gzip > ishigro_stg_orange_pos_stock_item_partial.$(date +%Y%m%d).dump.gz
mysqldump -u admin -h stg-ishiguro-db01.crx3rtja2ldw.ap-northeast-1.rds.amazonaws.com -p --skip-lock-tables --no-tablespaces --no-create-info --set-gtid-purged=OFF --single-transaction --tables orange_pos stock_transaction_item --where="stock_transaction_item_id IN ('01JDH1CTQCAV4R198VYB5KHDTP', '01HYFKRG5MH7SAJPD62XKRNFRC', '01JCFVRFPMAK294D7M1314PX3P', '01JD655RWZS43QW1EVC96DQCGR', '01J9B1SSWXD6TTZ5E4G3ETRWN9', '01HYFKRG48ECKRFXATPA7E6K2J', '01HYFKRG2W093YMRZ4G2FCF7QM', '01JD65VV83VDVWXQKEV9VGDAJG', '01HYFKRG9FWHMXMQJ7ZFJ4J7W1', '01J9B1X3TJYF7T11EAR6MQGDXR', '01JCFV29X9MDZ2PS981YMEC1XB', '01J9B1V2EFP5DEXM9M71HEA5TW', '01JCMC85XM5S56CTP45EMJH27N', '01J9B1V2CS762ZYBNPZX1W87N2', '01HXBJ3KJQH7QXAF0DED5BDNVP', '01JCF87ZMWVZ4E5ZF6RJCHTVG3', '01HRENC4292YZ6JDQ4WACNDXXG', '01JCFV29ZYNK1662P1W9SF15BE', '01HYFKRG068XYHJ0E48SJAHV3V', '01HXBJ3KGB4C8YF791BN90K6RV', '01HREN19RFWFPABY2Y2HQD1VXH', '01JD6WVQ7Q2TAW46JVR5CNS14C', '01HXGYTPM2ZESE87DBJ7JGM3A6', '01HRENC56T49PRK8TTRS6FEWFH', '01J9B1ST08M8ZSTCK0C98CA8MD', '01HYFKRG86VEM7RDZB5PC582JS', '01JD65DGYZDQMG1SYFMWKF738G', '01HYFKRGAJTXJP5FW725J2JC43', '01HYFKRG6WMKTFCQ3ACRGZ0TB5', '01HXGYTPP37XS5MAGVTTBW3Z0Q', '01HYFKRG1QQVQ2WP6R7VW6NEZA', '01JCF87ZQ4ZT51DD34M0A6SCJA', '01JCN1YQJQ6R1D3SE3RY9F87MR') " | gzip > ishigro_stg_orange_pos_stock_transaction_item_partial.$(date +%Y%m%d).dump.gz
mysqldump -u admin -h stg-ishiguro-db01.crx3rtja2ldw.ap-northeast-1.rds.amazonaws.com -p --skip-lock-tables --no-tablespaces --no-create-info --set-gtid-purged=OFF --single-transaction --tables orange_pos supplier_product --where="supplier_product_id IN ('906755FD4878A5535882562708', 'F1429A14F6DFD99CCD3786F2D3') " | gzip > ishigro_stg_orange_pos_supplier_product_partial.$(date +%Y%m%d).dump.gz



gzip -d ishigro_stg_orange_pos_buy_order_partial.20241209.dump.gz*
gzip -d ishigro_stg_orange_pos_buy_product_external_sync_partial.20241209.dump.gz*   
gzip -d ishigro_stg_orange_pos_buy_product_partial.20241209.dump.gz*
gzip -d ishigro_stg_orange_pos_pos_transaction_item_partial.20241209.dump.gz*        
gzip -d ishigro_stg_orange_pos_product_partial.20241209.dump.gz*
gzip -d ishigro_stg_orange_pos_product_price_partial.20241209.dump.gz*
gzip -d ishigro_stg_orange_pos_product_sku_partial.20241209.dump.gz*
gzip -d ishigro_stg_orange_pos_product_translation_partial.20241209.dump.gz*
gzip -d ishigro_stg_orange_pos_stock_item_partial.20241209.dump.gz*
gzip -d ishigro_stg_orange_pos_stock_transaction_item_partial.20241209.dump.gz*      
gzip -d ishigro_stg_orange_pos_supplier_product_partial.20241209.dump.gz*


mysql -u root -pabcABC123@ orange_pos <

mysql -u root -pabcABC123@ orange_pos < ishigro_stg_orange_pos_buy_order_partial.20241209.dump
mysql -u root -pabcABC123@ orange_pos < ishigro_stg_orange_pos_buy_product_external_sync_partial.20241209.dum
mysql -u root -pabcABC123@ orange_pos < ishigro_stg_orange_pos_buy_product_partial.20241209.dump
mysql -u root -pabcABC123@ orange_pos < ishigro_stg_orange_pos_pos_transaction_item_partial.20241209.dump
mysql -u root -pabcABC123@ orange_pos < ishigro_stg_orange_pos_product_partial.20241209.dump
mysql -u root -pabcABC123@ orange_pos < ishigro_stg_orange_pos_product_price_partial.20241209.dump
mysql -u root -pabcABC123@ orange_pos < ishigro_stg_orange_pos_product_sku_partial.20241209.dump
mysql -u root -pabcABC123@ orange_pos < ishigro_stg_orange_pos_product_translation_partial.20241209.dump
mysql -u root -pabcABC123@ orange_pos < ishigro_stg_orange_pos_stock_item_partial.20241209.dump
mysql -u root -pabcABC123@ orange_pos < ishigro_stg_orange_pos_stock_transaction_item_partial.20241209.dump.g
mysql -u root -pabcABC123@ orange_pos < ishigro_stg_orange_pos_supplier_product_partial.20241209.dump

